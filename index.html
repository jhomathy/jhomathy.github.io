<!DOCTYPE html>
<html lang="en">

<!--
  RESOURCES
https://www.createjs.com/getting-started/easeljs
-->

<!--
TODOs:

accessibility:
- make sure site responds to screen readers well
- run it through an accessibility checking website (or a few)

pick deadlines + advertising strategy (plz can someone else help w/ this)

launch!
--> 

<head>
  <title> TPYO Mag </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8"/>
  <link href="css/cover-page.css" type="text/css" rel="stylesheet"/>
  <script src="https://code.createjs.com/1.0.0/createjs.min.js"></script>
  <script src="https://code.createjs.com/1.0.0/tweenjs.min.js"></script>
<script> 
function init() {

  var alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
  var fonts = ["Times", "Arial", "Courier"];
  var fontSize = 28;
  var randomFontsInButtons = false;

  function getBorderCoords() {
    var x, y;
    if (Math.random() > 0.5) {
      if (Math.random() > 0.5) {
        x = 0; y = Math.random() * (canvas.height - fontSize);
      }
      else {
        x = canvas.width - fontSize; y = Math.random() * (canvas.height - fontSize);
      }
    }
    else {
      if (Math.random() > 0.5) {
        x = Math.random() * (canvas.width - fontSize); y = 0;
      }
      else {
        x = Math.random() * (canvas.width - fontSize); y = canvas.height - fontSize;
      }
    }
    return [x, y];
  }

  var canvas = document.getElementById("menuAnimation");
  var stage = new createjs.Stage(canvas);
  
  stage.enableMouseOver(10);

  // letters into the page
  for (var i = 0; i < 100; i++) {
    var lett = alphabet[Math.random() * alphabet.length | 0];
    var font = fonts[Math.random() * fonts.length | 0];
    var randomLetter = new createjs.Text(lett, fontSize + "px " + font, "#000000");

    randomLetter.x = 0;
    randomLetter.y = 0;
    randomLetter.speed = Math.random() * 2000 + 500;
    randomLetter.reveal = Math.random() * 4000 + 1000;
    randomLetter.alpha = 0;

    createjs.Tween.get(randomLetter, {loop: 0})
      .wait(randomLetter.reveal)
      .to({alpha: 1}, 500);

    if (i > 50) {
      createjs.Tween.get(randomLetter, {loop: -1})
        .to({x: 0, y: canvas.height - fontSize}, randomLetter.speed)
        .to({x: canvas.width - fontSize, y: canvas.height - fontSize}, randomLetter.speed)
        .to({x: canvas.width - fontSize, y: 0}, randomLetter.speed)
        .to({x: 0, y: 0}, randomLetter.speed);
    }
    else {
      createjs.Tween.get(randomLetter, {loop: -1})
        .to({x: canvas.width - fontSize, y: 0}, randomLetter.speed)
        .to({x: canvas.width - fontSize, y: canvas.height - fontSize}, randomLetter.speed)
        .to({x: 0, y: canvas.height - fontSize}, randomLetter.speed)
        .to({x: 0, y: 0}, randomLetter.speed);
    }

    stage.addChild(randomLetter);
  }

  function makeWordButton(word, xPos, yPos, time, fn) {

    var maxX = xPos;
    var maxY = yPos;
    var minX = xPos;
    var minY = yPos;

    var maxTime = 0;

    for (let i = 0; i < word.length; i++) {
      if (randomFontsInButtons) {var font = fonts[Math.random() * fonts.length | 0];}
      else {var font = fonts[0];}
      var letter = new createjs.Text(word[i], fontSize + "px " + font, "#000000");
      letter.finalX = xPos;
      letter.finalY = yPos;

      var coords = getBorderCoords();

      letter.x = coords[0];
      letter.y = coords[1];
      letter.speed = Math.random() * 2000 + 500;
      letter.reveal = Math.random() * 2000 + time + 2000;
      maxTime = Math.max(maxTime, letter.reveal + letter.speed);
      letter.alpha = 0;

      createjs.Tween.get(letter, {loop: 0})
        .wait(letter.reveal)
        .to({alpha: 1}, 500)
        .to({x: letter.finalX, y: letter.finalY}, letter.speed);

      stage.addChild(letter);

      xPos = letter.finalX + letter.getMeasuredWidth();

      if (letter.finalX + letter.getMeasuredWidth() > maxX) {maxX = xPos;}
      if (letter.finalY + letter.getMeasuredHeight() > maxY) {maxY = yPos + letter.getMeasuredHeight();}
      if (letter.finalX < minX) {minX = letter.finalX;}
      if (letter.finalY < minY) {minY = letter.finalY;}
    }

    function handleInteraction(event) {
        event.target.alpha = (event.type == "mouseover") ? 0.4 : 0.01; 
    }

    var rect = new createjs.Shape();
    rect.graphics.beginFill("#888888").drawRect(minX - 2, minY - 2, maxX - minX + 2, maxY - minY + 2);
    rect.alpha = 0;
    createjs.Tween.get(rect, {loop: 0})
        .wait(maxTime)
        .to({alpha: 0.01});
    
    rect.on("click", fn);
    rect.on("mouseover", handleInteraction);
    rect.on("mouseout", handleInteraction);

    stage.addChild(rect);

  }

  makeWordButton("About", 60, 60, 0, gotoAbout);
  makeWordButton("Poems", 60, 95, 1500, gotoPoems);
  makeWordButton("Stories", 60, 130, 3000, gotoStories);
  makeWordButton("QFAs", 60, 165, 4500, gotoQFA);

  function gotoAbout() {
    window.open ('index.html#about','_self',false);
  }

  function gotoPoems() {
    window.open ('poems.html','_self',false);
  }

  function gotoStories() {
    window.open ('stories.html','_self',false);
  }

  function gotoQFA() {
    window.open ('index.html#qaf','_self',false);
  }

  createjs.Ticker.addEventListener("tick", stage);
}
</script>
</head>


<body onload="init();">

 <table id="menu">
  <tr>
    <th><a href="index.html#about">About</a></th>
    <th><a href="poems.html">Poems</a></th>
    <th><a href="stories.html">Stories</a></th>
    <th><a href="index.html#qaf">QAFs</a></th>
  </tr>
</table> 

<div>
  <h1 id="title"> 
    | T | P | Y | O |
  </h1>
  <h2 id="motive">
    A literary magazine for works with typos.
  </h2>
</div>


<canvas id="menuAnimation" width="320" height="320" alt="Letters in random fonts spin about a square frame. Words begin to form from the chaos. About. Poems. Stories. Q A F's. This menu has the same features as table menu, which is itself rendered off-screen. Also, hello! Welcome to the alt-text of TPYO MAG."></canvas>

<div id="about" class="block">

<h3>About</h3>

<br>

<p>TPYO MAG (stylized as "T|P|Y|O Mag", <i>tpyo magazine</i>, or Tpyo) is a literary magazine celebrating works that contain typos. There are many reasons the typo is deserving of celebration. Typos can be funny! They can be humbling! Twitter users have called typos a strike against abelism and colonialism. But most importantly, typos reminds us that we are human.</p>

<br>

<p><strong><em>In addition to publishing typos, we also publish mistranslations, physical or digital artifacts, or any other "mistake" that is intentionally kept.</em></strong> To get a sense of what we're looking for, consider reading <a href="htmls/tommys/pdfs/md3.pdf">the only story published on this website as of right now</a>. Or you could write something yourself and submit it right right now so we can display a second example of what we're looking for!</p>

<br>

<p> TPYO MAG is socially owned and democratically controlled. This is very easy to do right now, because we only have one contributing member. Once two or three more people are interested in contributing the the magazine, we can collectively envision what it will look like going forward.</p>
</div>

<div id="qaf" class="block">

<h3>Questions, Frequently Asked</h3>

<br><br> 

<h4>Hello?</h4>

<br>

<p>hello!</p>

<br><br> 

<h4>Oh shit! Hi! Oh sorry for swearing, I hope that is OK. Honestly, I didn't think this would get a response. Oh wait. Hmm. <br><br> Hmmmmmmmmmmmmmmmmm. <br><br> I really wasn't expecting a response, and I don't know what to ask. Any suggestions?</h4>

<br>

<p>yes! well, you can probably tell this website is under construction right now. you could ask something about that. or.</p>

<br>

<p>yes! well, you can probably tell this website is under construction right now. you could ask something about that. or.</p>

<br><br> 

<h4>Ah I see, so these questions aren't actually frequently asked at all?</h4>

<br>

<p>Yup.</p>


</div>

<div id="legal" class="block">
Idk, legal stuff goes here. Things are copyrighted i guess. The code (except for the JavaScript libraries that are MIT Licensed) is owned by TPYO MAG. The stories and poems and hashtag content are owned by the people who wrote them unless those people gave the rights to someone else.
</div>

<div class="space"></div>

</body>
</html>
